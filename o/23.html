<!doctype html>
<html><head><link rel="stylesheet" href="../page.css"><title>7. Использование стандартной сортировки в C++</title></head><body><h1>7. Использование стандартной сортировки в C++</h1>
<div class="page_content_main"><h2>Функции sort и stable_sort</h2>
<p>Для сортировки массивов и векторов в STL есть функции <span class="page_code_style">sort</span> и <span class="page_code_style">stable_sort</span> (последняя реализует устойчивую сортировку, которая не меняет порядок элементов массива, если они равны).</p>
<p>Для сортировки вектора A алгоритм сортировки нужно вызывать так:</p>
<div class="page_code_style">
<p>sort(A.begin(), A.end())</p>
</div>
<p>Для сортировки массива A из n элементов функцию сортировки нужно вызывать так:</p>
<div class="page_code_style">
<p>sort(A, A + n)</p>
</div>
<p>Но в некоторых случаях необходимо использовать более сложные, настраиваемые функции сортировки, использующие нестандартный порядок. Есть несколько способов задавать настраиваемый порядок сортировки.</p><h2>Функция-компаратор</h2>
<p>Алгоритм сортировки сравнивает элементы при помощи операции "меньше". Можно самостоятельно реализовать операцию "меньше" и использовать её в алгоритме сортировки. Например, давайте упорядочим числа по последней цифре, а если последние цифры равны, то порядок неопределён. В этом случае мы вводим между ними отношение порядка, обозначим его <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x227A;</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.808ex" height="1.757ex" viewBox="0 -629 778.5 756.4" role="img" focusable="false" style="vertical-align: -0.296ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#MJMAIN-227A" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>≺</mo></math></span></span><script type="math/tex" id="MathJax-Element-1">\prec</script>. Например, следующие отношения будут верны, так как последняя цифра левого числа меньше, чем последняя цифра правого числа:</p>
<p><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>2</mn><mo>&amp;#x227A;</mo><mn>3</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.423ex" height="2.048ex" viewBox="0 -754.4 2335.1 881.8" role="img" focusable="false" style="vertical-align: -0.296ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#MJMAIN-32" x="0" y="0"></use><use xlink:href="#MJMAIN-227A" x="778" y="0"></use><use xlink:href="#MJMAIN-33" x="1834" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>2</mn><mo>≺</mo><mn>3</mn></math></span></span><script type="math/tex" id="MathJax-Element-2">2 \prec 3</script></p>
<p><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>12</mn><mo>&amp;#x227A;</mo><mn>3</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.586ex" height="2.048ex" viewBox="0 -754.4 2835.6 881.8" role="img" focusable="false" style="vertical-align: -0.296ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#MJMAIN-31"></use><use xlink:href="#MJMAIN-32" x="500" y="0"></use><use xlink:href="#MJMAIN-227A" x="1278" y="0"></use><use xlink:href="#MJMAIN-33" x="2335" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>12</mn><mo>≺</mo><mn>3</mn></math></span></span><script type="math/tex" id="MathJax-Element-3">12 \prec 3</script></p>
<p><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>102</mn><mo>&amp;#x227A;</mo><mn>73</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.911ex" height="2.048ex" viewBox="0 -754.4 3836.6 881.8" role="img" focusable="false" style="vertical-align: -0.296ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#MJMAIN-31"></use><use xlink:href="#MJMAIN-30" x="500" y="0"></use><use xlink:href="#MJMAIN-32" x="1001" y="0"></use><use xlink:href="#MJMAIN-227A" x="1779" y="0"></use><g transform="translate(2835,0)"><use xlink:href="#MJMAIN-37"></use><use xlink:href="#MJMAIN-33" x="500" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>102</mn><mo>≺</mo><mn>73</mn></math></span></span><script type="math/tex" id="MathJax-Element-4">102 \prec 73</script></p>
<p><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>98</mn><mo>&amp;#x227A;</mo><mn>99</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.748ex" height="2.048ex" viewBox="0 -754.4 3336.1 881.8" role="img" focusable="false" style="vertical-align: -0.296ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#MJMAIN-39"></use><use xlink:href="#MJMAIN-38" x="500" y="0"></use><use xlink:href="#MJMAIN-227A" x="1278" y="0"></use><g transform="translate(2335,0)"><use xlink:href="#MJMAIN-39"></use><use xlink:href="#MJMAIN-39" x="500" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>98</mn><mo>≺</mo><mn>99</mn></math></span></span><script type="math/tex" id="MathJax-Element-5">98 \prec 99</script></p>
<p>А следующие отношения порядка неверны:</p>
<p><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>3</mn><mo>&amp;#x2280;</mo><mn>2</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.423ex" height="2.631ex" viewBox="0 -817.1 2335.1 1132.6" role="img" focusable="false" style="vertical-align: -0.733ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#MJMAIN-33" x="0" y="0"></use><use xlink:href="#MJAMS-2280" x="778" y="0"></use><use xlink:href="#MJMAIN-32" x="1834" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>3</mn><mo>⊀</mo><mn>2</mn></math></span></span><script type="math/tex" id="MathJax-Element-6">3\nprec 2</script></p>
<p><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>3</mn><mo>&amp;#x2280;</mo><mn>3</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.423ex" height="2.631ex" viewBox="0 -817.1 2335.1 1132.6" role="img" focusable="false" style="vertical-align: -0.733ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#MJMAIN-33" x="0" y="0"></use><use xlink:href="#MJAMS-2280" x="778" y="0"></use><use xlink:href="#MJMAIN-33" x="1834" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>3</mn><mo>⊀</mo><mn>3</mn></math></span></span><script type="math/tex" id="MathJax-Element-7">3\nprec 3</script></p>
<p><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>7</mn><mo>&amp;#x2280;</mo><mn>22</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.586ex" height="2.631ex" viewBox="0 -817.1 2835.6 1132.6" role="img" focusable="false" style="vertical-align: -0.733ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#MJMAIN-37" x="0" y="0"></use><use xlink:href="#MJAMS-2280" x="778" y="0"></use><g transform="translate(1834,0)"><use xlink:href="#MJMAIN-32"></use><use xlink:href="#MJMAIN-32" x="500" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>7</mn><mo>⊀</mo><mn>22</mn></math></span></span><script type="math/tex" id="MathJax-Element-8">7 \nprec 22</script></p>
<p><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>103</mn><mo>&amp;#x2280;</mo><mn>113</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.073ex" height="2.631ex" viewBox="0 -817.1 4337.1 1132.6" role="img" focusable="false" style="vertical-align: -0.733ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#MJMAIN-31"></use><use xlink:href="#MJMAIN-30" x="500" y="0"></use><use xlink:href="#MJMAIN-33" x="1001" y="0"></use><use xlink:href="#MJAMS-2280" x="1779" y="0"></use><g transform="translate(2835,0)"><use xlink:href="#MJMAIN-31"></use><use xlink:href="#MJMAIN-31" x="500" y="0"></use><use xlink:href="#MJMAIN-33" x="1001" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>103</mn><mo>⊀</mo><mn>113</mn></math></span></span><script type="math/tex" id="MathJax-Element-9">103 \nprec 113</script></p>
<p>Отношение порядка должно удовлетворять следующим свойствам:</p>
<p>1. <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi><mo>&amp;#x2280;</mo><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.558ex" height="2.631ex" viewBox="0 -817.1 2393.1 1132.6" role="img" focusable="false" style="vertical-align: -0.733ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#MJMATHI-61" x="0" y="0"></use><use xlink:href="#MJAMS-2280" x="807" y="0"></use><use xlink:href="#MJMATHI-61" x="1863" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi><mo>⊀</mo><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-10">a\nprec a</script>.</p>
<p>2. Если <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi><mo>&amp;#x227A;</mo><mi>b</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.326ex" height="2.194ex" viewBox="0 -817.1 2293.1 944.5" role="img" focusable="false" style="vertical-align: -0.296ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#MJMATHI-61" x="0" y="0"></use><use xlink:href="#MJMAIN-227A" x="807" y="0"></use><use xlink:href="#MJMATHI-62" x="1863" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi><mo>≺</mo><mi>b</mi></math></span></span><script type="math/tex" id="MathJax-Element-11">a\prec b</script>, то <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>b</mi><mo>&amp;#x2280;</mo><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.326ex" height="2.631ex" viewBox="0 -817.1 2293.1 1132.6" role="img" focusable="false" style="vertical-align: -0.733ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#MJMATHI-62" x="0" y="0"></use><use xlink:href="#MJAMS-2280" x="707" y="0"></use><use xlink:href="#MJMATHI-61" x="1763" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>b</mi><mo>⊀</mo><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-12">b\nprec a</script>.</p>
<p>3. Если <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi><mo>&amp;#x227A;</mo><mi>b</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.326ex" height="2.194ex" viewBox="0 -817.1 2293.1 944.5" role="img" focusable="false" style="vertical-align: -0.296ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#MJMATHI-61" x="0" y="0"></use><use xlink:href="#MJMAIN-227A" x="807" y="0"></use><use xlink:href="#MJMATHI-62" x="1863" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi><mo>≺</mo><mi>b</mi></math></span></span><script type="math/tex" id="MathJax-Element-13">a \prec b</script> и <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>b</mi><mo>&amp;#x227A;</mo><mi>c</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.103ex" height="2.194ex" viewBox="0 -817.1 2197.1 944.5" role="img" focusable="false" style="vertical-align: -0.296ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#MJMATHI-62" x="0" y="0"></use><use xlink:href="#MJMAIN-227A" x="707" y="0"></use><use xlink:href="#MJMATHI-63" x="1763" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>b</mi><mo>≺</mo><mi>c</mi></math></span></span><script type="math/tex" id="MathJax-Element-14">b \prec c</script>, то <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi><mo>&amp;#x227A;</mo><mi>c</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.335ex" height="1.757ex" viewBox="0 -629 2297.1 756.4" role="img" focusable="false" style="vertical-align: -0.296ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#MJMATHI-61" x="0" y="0"></use><use xlink:href="#MJMAIN-227A" x="807" y="0"></use><use xlink:href="#MJMATHI-63" x="1863" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi><mo>≺</mo><mi>c</mi></math></span></span><script type="math/tex" id="MathJax-Element-15">a \prec c</script>.</p>
<p>Для того, чтобы использовать функцию-компаратор, необходимо объявить функцию, которая получает на вход два сравниваемых значения и возвращает значение типа bool, при этом она возвращает true, если первый аргумент меньше второго аргумента, то есть обязан в упорядоченном массиве идти раньше второго.</p>
<p>Пример реализации такой функции для сортировки значений по последней цифре:</p>
<div class="page_code_style">
<p>bool cmp(int a, int b)<br>{<br>&nbsp;&nbsp;&nbsp; return a % 10 &lt; b % 10;<br>}</p>
</div>
<p>Эта функция передается в функцию sort третьим параметром:</p>
<div class="page_code_style">
<p>sort(a.begin(), a.end(), cmp);</p>
</div>
<p>Если есть два элемента <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.23ex" height="1.611ex" viewBox="0 -566.3 529.5 693.7" role="img" focusable="false" style="vertical-align: -0.296ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#MJMATHI-61" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-16">a</script> и <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>b</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.998ex" height="2.194ex" viewBox="0 -817.1 429.5 944.5" role="img" focusable="false" style="vertical-align: -0.296ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#MJMATHI-62" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>b</mi></math></span></span><script type="math/tex" id="MathJax-Element-17">b</script>, такие, что <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi><mo>&amp;#x2280;</mo><mi>b</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.326ex" height="2.631ex" viewBox="0 -817.1 2293.1 1132.6" role="img" focusable="false" style="vertical-align: -0.733ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#MJMATHI-61" x="0" y="0"></use><use xlink:href="#MJAMS-2280" x="807" y="0"></use><use xlink:href="#MJMATHI-62" x="1863" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi><mo>⊀</mo><mi>b</mi></math></span></span><script type="math/tex" id="MathJax-Element-18">a\nprec b</script> и <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>b</mi><mo>&amp;#x2280;</mo><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.326ex" height="2.631ex" viewBox="0 -817.1 2293.1 1132.6" role="img" focusable="false" style="vertical-align: -0.733ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="#MJMATHI-62" x="0" y="0"></use><use xlink:href="#MJAMS-2280" x="707" y="0"></use><use xlink:href="#MJMATHI-61" x="1763" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>b</mi><mo>⊀</mo><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-19">b\nprec a</script>, то с точки зрения сортировки эти элементы "равны". В нашем примере это два числа, оканчивающиеся на одинаковые цифры. Тогда их порядок не определен, если используется функция sort. Если же использовать функцию stable_sort, то эта функция не переставляет равные элементы, то есть сохраняется тот же порядок, который был в массиве до сортировки.</p>
<p>Приведем еще один пример сортировки двух чисел - по возрастанию последней цифры числа, а если последние цифры равны - то по убыванию самих чисел.</p>
<div class="page_code_style">
<p>bool cmp(int a, int b)<br>{<br>&nbsp;&nbsp;&nbsp; return a % 10 &lt; b % 10 || a % 10 == b % 10 &amp;&amp; a &gt; b;<br>}</p>
</div>
<p>Заметим также, что в функцию-компаратор лучше передавать объекты не по значению, а по ссылке, в этом случае они не будут копироваться (что может занимать значительное время при передачи крупных объектов, например, строк, векторов и т.д.). Тогда функцию нужно объявлять так:</p>
<div class="page_code_style">
<p>bool cmp(const int &amp; a, const int &amp; b);</p>
</div><h2>Оператор "меньше" для классов и структур</h2>
<p>Если сортировка используется для каких-то классов или структур данных, то для них можно определить оператор "меньше", а не использовать функцию-компаратор. Тогда сортировка (если не задать компаратор) для сравнения будет использовать определенный оператор "меньше".</p>
<p>Например, рассмотрим структур fraction для хранения рациональных дробей, для простоты ограничимся только положительными дробями. Дроби будут храниться в виде двух целых чисел - числителя и знаменателя, поэтому у нашей структуры будут два поля: a и b.</p>
<p>Стуктура fraction определяется так:</p>
<div class="page_code_style">struct fraction {<br>&nbsp;&nbsp;&nbsp; int a, b;<br>}</div>
<p>Есть разные способы определения для собственных структур и классов арифметических функций, покажем только один пример: функция с названием operator&lt;, получающая на вход два аргумента (соответствующие левому и правому операнду, поэтому назовем их left и right), возвращающая значение типа bool. Операнды будем передавать по константным ссылкам:</p>
<div class="page_code_style">
<p>bool operator&lt; (const fraction &amp; left, const fraction &amp; right) {<br>&nbsp;&nbsp;&nbsp; return left.a * right.b &lt; left.b * right.a;<br>}</p>
</div><h2>Структура pair</h2>
<p>В библиотеке STL есть шаблон класса <span class="page_code_style">pair</span>.</p>
<p>Класс <span class="page_code_style">pair</span> - это два значения, то есть "пара". У объектов этого класса два поля, первое называется <span class="page_code_style">first</span>, второе называется <span class="page_code_style">second</span>. Например, класс <span class="page_code_style">pair</span> можно использовать для хранения точек плоскости (точка - это две координаты) или рациональных дробей (дробь - два числа).</p>
<p>Один экземпляр объектов класса <span class="page_code_style">pair</span> определяется так:</p>
<div class="page_code_style">
<p>pair &lt;int, int&gt; p;</p>
</div>
<p>Теперь p — это структура с двумя полями, типа <span class="page_code_style">int</span> каждое, им можно присваивать значения:</p>
<div class="page_code_style">
<p>p.first = 1;<br>p.second = 2;</p>
</div>
<p>Можно сразу присвоить значение "паре" целиком, здесь может оказаться полезным функция <span class="page_code_style">make_pair</span>, у которой два аргумента, и которая возвращает объект класса <span class="page_code_style">pair</span>, поля которого равны двум аргументам. Например:</p>
<div class="page_code_style">
<p>p = make_pair(1, 2);</p>
</div>
<p>Можно создавать массивы и вектора из <span class="page_code_style">pair</span>, например:</p>
<div class="page_code_style">
<p>vector&lt;pair&lt;int, int&gt; &gt; a;</p>
</div>
<p><span class="page_code_style">pair</span> сортируются в лексикографическом порядке, то есть сначала они упорядочиваются по значению поля <span class="page_code_style">first</span>, а при равном значении поля <span class="page_code_style">first</span> — по значению поля <span class="page_code_style">second</span>. Поэтому для решения задачи сортировки, например, чисел по последней цифре можно создать <span class="page_code_style">pair</span>, у которой поле <span class="page_code_style">first</span> будет равно последней цифре числа, а поле <span class="page_code_style">second</span> - самому числу. Рассмотрим два примера реализации считывания и создания такого массива:</p>
<div class="page_code_style">
<p>int n;<br>cin &gt;&gt; n;<br>vector&lt;pair&lt;int, int&gt; &gt; a(n);<br>for (int i = 0; i &lt; n; ++i) {<br>&nbsp;&nbsp;&nbsp; cin &gt;&gt; a[i].second;<br>&nbsp;&nbsp;&nbsp; a[i].first = a[i].second % 10;<br>}</p>
</div>
<p>А в следующем примере будем использовать функцию <span class="page_code_style">make_pair</span> для создания пары и добавления ее в конец вектора:</p>
<div class="page_code_style">
<p>int n;<br>cin &gt;&gt; n;<br>vector&lt;pair&lt;int, int&gt; &gt; a;<br>for (int i = 0; i &lt; n; ++i) {<br>&nbsp;&nbsp;&nbsp; int num;<br>&nbsp;&nbsp;&nbsp; cin &gt;&gt; num;<br>&nbsp;&nbsp;&nbsp; a.push_back(make_pair(n % 10, n));<br>}</p>
</div>
<p>Элементами пары могут быть объекты разных типов, не только числа.</p>
<p>Другое типичное применение <span class="page_code_style">pair</span> в сортировке - сортировка данных с сохранением информации об их порядке. Например, пусть дана последовательность строк, их нужно отсортировать по алфавиту, но нужно для каждой строки запомнить ее номер во входных данных. В этом случае нужно использовать <span class="page_code_style">pair</span>, у которой первое поле - строка, а второе поле - число, в котором будет храниться номер:</p>
<div class="page_code_style">
<p>int n;<br>cin &gt;&gt; n;<br>vector&lt;pair&lt;string, int&gt; &gt; a(n);<br>for (int i = 0; i &lt; n; ++i) {<br>&nbsp;&nbsp;&nbsp; cin &gt;&gt; a[i].first;<br>&nbsp;&nbsp;&nbsp; a[i].second = i;<br>}</p>
</div><h2>Структура tuple</h2>
<p>Допустим, в одной переменной нужно хранить не два, а большее число полей. Например, информация о человеке может содержать поля имя, фамилия, возраст, и необходимо как-то сортировать эти данные.</p>
<p>Возможные варианты решения:</p>
<p>1. Создание собственной структуры данных с указанием нужных полей. Например,</p>
<div class="page_code_style">
<p>struct person {<br>&nbsp;&nbsp;&nbsp; string lastname;<br>&nbsp;&nbsp;&nbsp; string firstname;<br>&nbsp;&nbsp;&nbsp; int age;<br>}</p>
</div>
<p>В этом случае придется объявлять саму структуру, затем реализовывать операцию сравнения, что может занимать достаточно много кода.</p>
<p>2. Использовать pair, один из элементов которого также является pair.</p>
<p>Например, можно объявить переменную так:</p>
<div class="page_code_style">
<p>pair &lt;string, pair&lt;string, int&gt; &gt; person;<br>person.first = lastname;<br>person.second.first = firstname;<br>person.second.second = age;</p>
</div>
<p>Это не требует объявления структуры, но достаточно неудобно обращаться к полям структуры через конструкции вида <span class="page_code_style">.second.first</span>.</p>
<p>Начиная со стандарта C++11 в STL есть класс <span class="page_code_style">tuple</span> (кортеж), который предоставляет возможность создавать аналоги pair из любого количества полей. Например, для представления класса из трех полей типа <span class="page_code_style">string</span>, <span class="page_code_style">string</span>, <span class="page_code_style">int</span> можно объявить класс следующим образом:</p>
<div class="page_code_style">
<p>tuple &lt;string, string, int&gt; p;</p>
</div>
<p>Для доступа к полям <span class="page_code_style">tuple</span> используется конструкция <span class="page_code_style">get</span> следующим образом:</p>
<div class="page_code_style">
<p>get&lt;0&gt;(p) = lastname;<br>get&lt;1&gt;(p) = firstname;<br>get&lt;2&gt;(p) = age;</p>
</div>
<p>Параметр, передаваемый функции <span class="page_code_style">get</span> в угловых скобках — это номер поля, индексация начинается с нуля. Это значение должно быть константой, то есть определено на момент компиляции программы, нельзя в качестве этого значения использовать переменную.</p>
<p>Например, объявим класс <span class="page_code_style">person</span> как <span class="page_code_style">tuple</span> из трех полей при помощи <span class="page_code_style">typedef</span> (для упрощения последующего использования)</p>
<div class="page_code_style">typedef tuple &lt;string, string, int&gt; person;<br>int n;<br>cin &gt;&gt; n;<br>vector &lt;person&gt; p(n);<br>for (int i = 0; i &lt; n; ++i) {<br>&nbsp;&nbsp;&nbsp; cin &gt;&gt; get&lt;0&gt;(p[i]) &gt;&gt; get&lt;1&gt;(p[i]) &gt;&gt; get&lt;2&gt;(p[i]);<br>}</div>
<p>Или можно использовать функцию <span class="page_code_style">make_tuple</span>, аналогичную make_pair:</p>
<div class="page_code_style">typedef tuple &lt;string, string, int&gt; person;<br>int n;<br>cin &gt;&gt; n;<br>vector &lt;person&gt; p;<br>for (int i = 0; i &lt; n; ++i) {<br>&nbsp;&nbsp;&nbsp; string lastname, firstname;<br>&nbsp;&nbsp;&nbsp; int age;<br>&nbsp;&nbsp;&nbsp; cin &gt;&gt; lastname &gt;&gt; firsstname &gt;&gt; age;<br>&nbsp;&nbsp;&nbsp; p.push_back(make_tuple(lastname, firstname, age));<br>}</div>
<p>Tuple сортируются также в лексикографическом порядке — сначала по первому полю, при равенстве первого поля — по второму, затем по третьему и т.д.<br><br></p></div><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script></body></html>